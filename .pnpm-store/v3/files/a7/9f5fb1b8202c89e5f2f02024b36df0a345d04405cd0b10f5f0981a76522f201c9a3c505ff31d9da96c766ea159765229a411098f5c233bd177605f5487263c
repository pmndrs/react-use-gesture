var e,n,t=require("@radix-ui/react-compose-refs").useComposedRefs,r=(e={},n=require("react"),Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),e);const u=e=>{const{present:n,children:u}=e,s=function(e){const[n,t]=r.useState(),u=r.useRef({}),s=r.useRef(e),i=r.useRef(),c=e?"mounted":"unmounted",[a,d]=function(e,n){return r.useReducer(((e,t)=>{const r=n[e][t];return null!=r?r:e}),e)}(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect((()=>{const n=u.current,t=s.current;if(t!==e){const r=i.current,u=o(n);if(e)d("MOUNT");else if("none"===u||"none"===(null==n?void 0:n.display))d("UNMOUNT");else{const e=r!==u;d(t&&e?"ANIMATION_OUT":"UNMOUNT")}s.current=e}}),[e,d]),r.useEffect((()=>{if(n){const e=e=>{const t=o(u.current).includes(e.animationName);e.target===n&&t&&d("ANIMATION_END")},t=e=>{e.target===n&&(i.current=o(u.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}}),[n,d]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:r.useCallback((e=>{e&&(u.current=getComputedStyle(e),t(e))}),[])}}(n),i="function"==typeof u?u({present:s.isPresent}):r.Children.only(u),c=t(s.ref,i.ref);return"function"==typeof u||s.isPresent?/*#__PURE__*/r.cloneElement(i,{ref:c}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}exports.Presence=u,u.displayName="Presence";
//# sourceMappingURL=index.js.map
